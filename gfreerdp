#!/usr/bin/wish

set commandctl "/usr/bin/xfreerdp"
global commandctl hostname usrname passwd

proc screen {} {
  frame .top -borderwidth 10
  pack .top -fill x	
  button .top.connect -text "Connect(wantReturn)" -command connect -bg green

  set hostname "172.16.X..X"
  label .top.labelhost -text "Hostname:"
  entry .top.hostname -width 40 -relief sunken -bd 2 -textvariable hostname
  #insert default template value
 .top.hostname insert 0 $hostname
  
  label .top.labelusr -text "Username:"
  entry .top.username -width 40 -relief sunken -bd 2 -textvariable usrname
  
  label .top.labelpass -text "Password:"
  entry .top.passwd -width 40 -relief sunken -bd 2 -show * -textvariable passwd
  
  pack .top.labelhost .top.hostname -fill x
  pack .top.labelusr .top.username -fill x
  pack .top.labelpass .top.passwd -fill x
  pack .top.connect -fill x

  #want return
  bind .  <Return> { connect }
}
screen

proc connect {} {
 global commandctl hostname usrname passwd
  # for xfreerdp ctrl + alt + enter to toggle fullscreen
  exec $commandctl /f /toggle-fullscreen  /cert-ignore  /v:$hostname /u:$usrname /p:$passwd
}
